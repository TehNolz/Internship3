@page "/Content/{*Route}"
@using System.Diagnostics

@inject IDocumentService DocumentService

@{
    //Retrieve the markdown document. If it doesn't exist, show a 404 page and print the path to the console (for debugging)
    var document = DocumentService.GetDocument(DocumentPath);
    if (document != null)
    {
        @((MarkupString)document)
    }
    else
    {
        Debug.Print($"Can't find file: {Route}");
        <_404/>
    }
}

@code {
    /// <summary>
    /// The route the document is located at.
    /// </summary>
    [Parameter]
    public string Route { get; set; }

    /// <summary>
    /// The path to the embedded resource
    /// </summary>
    /// <returns></returns>
    public string DocumentPath => Route.Replace('/', '.');
}
